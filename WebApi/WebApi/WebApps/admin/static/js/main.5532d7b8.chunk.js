(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{330:function(e,t,a){e.exports=a(598)},335:function(e,t,a){},341:function(e,t){},343:function(e,t){},380:function(e,t){},381:function(e,t){},596:function(e,t,a){},598:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(48),l=a.n(i),r=(a(335),a(70)),c=a(63),s=a(60),u=a(34),m=a(35),d=a(39),h=a(36),p=a(38),f=a(295),g=a.n(f),b="AUTH_KEY";function E(){var e=localStorage.getItem(b);if(!e)return!1;var t=g.a.decode(e);if(t){var a=t.exp;return(new Date).getTime()<1e3*a}return!1}var y=a(141),v=function(e){var t=e.multichoiceCategories,a=e.checkboxKonto,n=e.adressStart,o=e.adressEnd,i=e.phone,l=e.dateStart,r=e.dateEnd,c=Object(y.a)(e,["multichoiceCategories","checkboxKonto","adressStart","adressEnd","phone","dateStart","dateEnd"]);return Object(s.a)({categories:t,account:a,addressFrom:n,addressTo:o,contactNumber:i,dateFrom:l,dateTo:r},c)},k="https://localhost:44335/api/auction";var C=a(611),j=a(45),w=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).showPage=function(t){t>0&&t<=e.pages().length&&e.setState({page:t},e.loadAuctions)},e.nextPage=function(){return e.showPage(e.state.page+1)},e.previousPage=function(){return e.showPage(e.state.page-1)},e.deleteClicked=function(t){return e.setState({toBeDeleted:t,deleteConfirmOpen:!0})},e.state={values:[],totalCount:0,page:1,pageSize:5,isLoading:!1,deleteConfirmOpen:!1,toBeDeleted:null},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("table",{className:"ui celled padded table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"three wide"},"Tytu\u0142"),o.a.createElement("th",{className:"six wide"},"Opis"),o.a.createElement("th",{className:"two wide"},"Wa\u017cna od"),o.a.createElement("th",{className:"two wide"},"Wa\u017cna do"),o.a.createElement("th",{className:"three wide"}))),o.a.createElement("tbody",null,this.state.values.map(function(t){return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null,t.title),o.a.createElement("td",null,t.description),o.a.createElement("td",null,new Date(t.dateFrom).toLocaleDateString()),o.a.createElement("td",null,new Date(t.dateTo).toLocaleDateString()),o.a.createElement("td",null,o.a.createElement("button",{className:"ui gray button",onClick:function(){e.props.history.push("/admin/edit/".concat(t.id))}},"Edytuj"),o.a.createElement("button",{className:"ui red button",onClick:e.deleteClicked.bind(e,t.id)},"Usu\u0144")))})),o.a.createElement("tfoot",null,o.a.createElement("tr",null,o.a.createElement("th",{colSpan:"5"},o.a.createElement("button",{className:"ui blue button",onClick:function(){e.props.history.push("/admin/add")}},"Dodaj"),o.a.createElement("div",{className:"ui right floated pagination menu"},o.a.createElement("a",{className:"icon item",onClick:this.previousPage},o.a.createElement("i",{className:"left chevron icon"})),this.pages(),o.a.createElement("a",{className:"icon item",onClick:this.nextPage},o.a.createElement("i",{className:"right chevron icon"}))),o.a.createElement("div",{className:"ui label total"},"Ca\u0142kowita ilo\u015b\u0107: ",this.state.totalCount))))),o.a.createElement(C.a,{open:this.state.deleteConfirmOpen,header:"Potwierdzenie",cancelButton:"Anuluj",confirmButton:"Potwierd\u017a",content:"Czy potwierdzasz usuni\u0119cie aukcji?",onCancel:function(){e.setState({toBeDeleted:null,deleteConfirmOpen:!1})},onConfirm:this.deleteConfirm.bind(this)}))}},{key:"componentDidMount",value:function(){this.loadAuctions()}},{key:"loadAuctions",value:function(){var e=this;this.setState({isLoading:!0}),function(e,t){var a=new URL("https://localhost:44335/api/auction"),n={page:e,pageSize:t};return Object.keys(n).forEach(function(e){return a.searchParams.append(e,n[e])}),fetch(a,{method:"get",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem(b))}})}(this.state.page,this.state.pageSize).then(function(e){return e.json()}).then(function(t){e.setState(Object(s.a)({isLoading:!1},t))})}},{key:"pages",value:function(){for(var e=[],t=this.state.totalCount/this.state.pageSize+1,a=1;a<t;a++)e.push(o.a.createElement("a",{key:a,onClick:this.showPage.bind(this,a),className:this.state.page==a?"active item":"item"},a));return e}},{key:"deleteConfirm",value:function(){var e=this;this.setState({toBeDeleted:null,deleteConfirmOpen:!1}),function(e){var t=new URL("https://localhost:44335/api/auction");return t.searchParams.append("id",e),fetch(t,{method:"delete",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem(b))}})}(this.state.toBeDeleted).then(function(t){t.ok?j.b.success("Usuni\u0119cie powiod\u0142o si\u0119"):j.b.error("Usuni\u0119cie nie powiod\u0142o si\u0119"),e.loadAuctions()})}}]),t}(o.a.Component),S=a(136),O=a(612),D=a(608),N=a(319),z=a(609),L=a(613),x=a(607),P=a(599),A="https://localhost:44335/api/category";var F=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={form:{title:"",image:null,description:"",multichoiceCategories:[],dotpayLink:"",paypalLink:"",siepomagaLink:"",checkboxKonto:!0,dateStart:a.getCurrentDate(),dateEnd:"",adressStart:"",adressEnd:"",phone:"",files:null},loaded:!1,categories:[],duringUpload:!1,uploadStatus:!1},a.onChange=function(e,t){var n=t.name,o=t.value;a.setState(function(e){var t=e.form;return{form:Object(s.a)({},t,Object(S.a)({},n,o))}})},a.formSubmitted=function(e){e.preventDefault();var t=a.state,n=t.loaded,o=t.form;n&&a.props.onSubmit(o).then(function(){return a.setState({duringUpload:!1,uploadStatus:!0})}).catch(function(){return a.setState({duringUpload:!1,uploadStatus:!1})})},a.options=[{key:"klucz",text:"nazwa",value:"wartosc"}],a.uploadImage=function(e){var t=e.target.files,n=new FileReader;n.onloadend=function(){a.setState(function(e){var t=e.form;return{form:Object(s.a)({},t,{image:n.result})}})},n.readAsDataURL(t[0])};var n=a.props,o=n.form;return n.isUpdate&&(a.state={form:Object(s.a)({},o)}),a.state.loaded=!1,a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(A).then(function(e){return e.json()}).then(function(t){return e.setState({loaded:!0,categories:t.map(function(e){return{key:e.id,text:e.name,value:e.id}})})})}},{key:"getCurrentDate",value:function(){return(new Date).toISOString().slice(0,10)}},{key:"render",value:function(){var e=this.state.form,t=e.title,a=e.image,n=e.description,i=e.multichoiceCategories,l=e.dotpayLink,r=e.paypalLink,c=e.siepomagaLink,s=e.checkboxKonto,u=e.dateStart,m=e.dateEnd,d=(e.adressStart,e.adressEnd,e.phone);console.log(a);var h=this.state,p=h.loaded,f=h.categories,g=h.duringUpload;return o.a.createElement(O.a,{onSubmit:this.formSubmitted,style:{marginBottom:"50px"}},o.a.createElement(O.a.Field,{control:D.a,name:"title",label:"Tytu\u0142",placeholder:"Tytu\u0142",value:t,onChange:this.onChange,required:!0}),o.a.createElement(O.a.Field,{label:"Wybierz zdj\u0119cie",control:D.a,placeholder:"Zdj\u0119cie...",name:"pic",type:"File",accept:"image/*",onChange:this.uploadImage}),a&&o.a.createElement(O.a.Field,null,o.a.createElement(N.a,{src:a,size:"small",alt:"wybrane zdjecie",wrapped:!0,name:"image",value:a,onChange:this.onChange})),o.a.createElement(O.a.Field,{control:z.a,label:"Opis",placeholder:"Opis",name:"description",value:n,onChange:this.onChange,required:!0}),o.a.createElement(O.a.Field,{label:"Wybierz kategori\u0119",control:L.a,placeholder:"Kategorie",fluid:!0,multiple:!0,selection:!0,options:f,name:"multichoiceCategories",value:i,onChange:this.onChange,loading:!p,required:!0}),o.a.createElement(O.a.Field,{control:D.a,label:"Dotpay",placeholder:"Link do dotpay",name:"dotpayLink",value:l,onChange:this.onChange}),o.a.createElement(O.a.Field,{control:D.a,label:"Paypal",placeholder:"Link do paypal",name:"paypalLink",value:r,onChange:this.onChange}),o.a.createElement(O.a.Field,{control:D.a,label:"siepomaga",placeholder:"Link do siepomaga",name:"siepomagaLink",value:c,onChange:this.onChange}),o.a.createElement(O.a.Field,{control:x.a,label:"Konto",name:"checkboxKonto",checked:s,onChange:this.onChange}),o.a.createElement(O.a.Group,{widths:"equal"},o.a.createElement(O.a.Field,{control:D.a,label:"Data pocz\u0105tkowa",placeholder:"Data pocz\u0105tkowa",name:"dateStart",value:u,type:"date",onChange:this.onChange}),o.a.createElement(O.a.Field,{control:D.a,label:"Data ko\u0144cowa",placeholder:"Data ko\u0144cowa",name:"dateEnd",value:m,type:"date",onChange:this.onChange})),o.a.createElement(O.a.Field,{control:D.a,label:"Telefon",placeholder:"Wprowad\u017a numer telefonu",name:"phone",value:d,onChange:this.onChange}),o.a.createElement(P.a,{type:"submit",color:"green",size:"big",disabled:g},"Wy\u015blij"," "))}}]),t}(n.Component),I=a(615),W=a(617),B=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).onSumbit=function(e){return console.log(e),function(e){var t=new URL(k);return fetch(t,{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem(b))},body:JSON.stringify(v(e))})}(e).then(function(e){if(200!==e.status)throw new Error(e.status);j.b.success("Zbi\xf3rka zosta\u0142a dodana")}).catch(function(e){j.b.error("Dodawanie nie powiod\u0142o si\u0119, spr\xf3buj ponownie p\xf3\u017aniej")})},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement(I.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",margintop:"10px"},o.a.createElement(I.a.Column,{style:{maxWidth:450}},o.a.createElement(W.a,{as:"h2",color:"black",textAlign:"center"},this.props.header),o.a.createElement(F,{onSubmit:this.onSumbit})))}}]),t}(n.Component);function T(){return o.a.createElement(B,{header:"Dodaj now\u0105 zbi\xf3rk\u0119"})}var U=a(616),K=a(610),R=function(e,t){var a=new URL("https://localhost:44335/api/notification");return fetch(a,{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem(b))},body:JSON.stringify({auctionId:e,type:t})})},J=function(e){var t=new URL("https://localhost:44335/api/notification"),a={auctionId:e};return Object.keys(a).forEach(function(e){return t.searchParams.append(e,a[e])}),fetch(t,{method:"get",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem(b))}})},Z=a(614),q=a(102),M=a(72),_=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).onSubmit=function(){return a.setState({confirmOpen:!0})},a.state={collapsed:!0,confirmOpen:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.type,n=t.notificationDetails,i=t.submitConfirmed;return o.a.createElement(I.a,{textAlign:"center"},o.a.createElement(I.a.Column,{style:{maxWidth:500}},o.a.createElement("div",{style:{cursor:"pointer"}},o.a.createElement(W.a,{as:"h4",color:"teal",textAlign:"center",onClick:function(){return e.setState({collapsed:!e.state.collapsed})}},o.a.createElement("p",null,"Dodaj notyfikacj\u0119 ",a," ",this.state.collapsed,o.a.createElement("i",{className:"angle icon "+(this.state.collapsed?"down":"up")})))),o.a.createElement("div",{style:{display:this.state.collapsed?"none":"block"}},o.a.createElement(Z.a,null,"Prenumeratorzy notyfikacji ",a,o.a.createElement("br",null),o.a.createElement(q.a,null,o.a.createElement(M.a,{name:"users"}),null!=n.subscribed?n.subscribed:"obliczam...")),o.a.createElement(Z.a,null,"Liczba wys\u0142anych notyfikacji ",a," w tym miesi\u0105cu",o.a.createElement("br",null),o.a.createElement(q.a,null,o.a.createElement(M.a,{name:"envelope open outline"}),null!=n.alreadySent&&null!=n.monthlyLimit?"".concat(n.alreadySent,"/").concat(n.monthlyLimit):"obliczam...")),o.a.createElement(P.a,{color:"teal",fluid:!0,size:"large",onClick:function(){return e.onSubmit()}},"Wy\u015blij"))),o.a.createElement(C.a,{open:this.state.confirmOpen,header:"Potwierd\u017a",confirmButton:"Wy\u015blij",cancelButton:"Anuluj",content:"Potwierdzasz wys\u0142anie notyfikacji?",onCancel:function(){return e.setState({confirmOpen:!1})},onConfirm:function(){e.setState({confirmOpen:!1}),i()}}))}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={NotificationDetails:{Sms:{alreadySent:null,monthlyLimit:null,subscribed:null},Push:{alreadySent:null,monthlyLimit:null,subscribed:null},Email:{alreadySent:null,monthlyLimit:null,subscribed:null}}},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.loadNotificationDetails()}},{key:"loadNotificationDetails",value:function(){var e=this;J(this.props.auctionId).then(function(e){return e.json()}).then(function(t){e.setState({NotificationDetails:t})})}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(_,{type:"SMS",notificationDetails:this.state.NotificationDetails.Sms,submitConfirmed:function(){e.confirmed("sms")}}),o.a.createElement(_,{type:"Email",notificationDetails:this.state.NotificationDetails.Email,submitConfirmed:function(){e.confirmed("email")}}),o.a.createElement(_,{type:"Push",notificationDetails:this.state.NotificationDetails.Push,submitConfirmed:function(){e.confirmed("push")}}))}},{key:"confirmed",value:function(e){var t=this;R(this.props.auctionId,e).then(function(e){e.ok?j.b.success("Poprawnie dodano notyfikacj\u0119"):j.b.error("Dodanie notyfikacji nie powiod\u0142o si\u0119"),t.loadNotificationDetails()})}}]),t}(n.Component);function H(e){var t=e.match;return o.a.createElement(U.a,null,o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(K.a,{horizontal:!0},"Lub"),o.a.createElement(G,{auctionId:Number(t.params.id)}))}function Y(){return o.a.createElement(r.a,null,o.a.createElement(c.b,{exact:!0,path:"/admin",component:w}),o.a.createElement(c.b,{path:"/admin/list",component:w}),o.a.createElement(c.b,{path:"/admin/add",component:T}),o.a.createElement(c.b,{path:"/admin/edit/:id",component:H}))}var $=a(137),Q=function(e,t){return fetch("https://localhost:44335/api/user/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:e,password:t})})},V=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={logine:"",password:"",invalid_credentials:!1},a.handleSubmit=a.handleSubmit.bind(Object($.a)(a)),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"handleSubmit",value:function(e){var t=this;Q(this.state.login,this.state.password).then(function(e){return e.json()}).then(function(e){e.token?(localStorage.setItem(b,e.token),t.props.history.push("/admin/list")):t.setState({invalid_credentials:!0})}),e.preventDefault()}},{key:"render",value:function(){var e=this;return E()?(this.props.history.push("/admin/list"),null):o.a.createElement(I.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},o.a.createElement(I.a.Column,{style:{maxWidth:450}},o.a.createElement(W.a,{as:"h2",color:"black",textAlign:"center"},"Zaloguj si\u0119 jako administrator:"),o.a.createElement(O.a,{size:"large"},o.a.createElement(U.a,{stacked:!0},o.a.createElement(O.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Wprowad\u017a login",type:"text",value:this.state.login,onChange:function(t){e.setState({login:t.target.value})}}),o.a.createElement(O.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Wprowad\u017a has\u0142o",type:"password",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})}}),o.a.createElement(P.a,{onClick:this.handleSubmit,color:"black",fluid:!0,size:"large"},"Zaloguj"))),o.a.createElement(Z.a,null,"Nie jeste\u015b administratorem? ",o.a.createElement(r.b,{to:"/"},"Wr\xf3\u0107 na stron\u0119 g\u0142\xf3wn\u0105"))))}}]),t}(o.a.Component);function X(e){var t=e.component,a=Object(y.a)(e,["component"]);return o.a.createElement(c.b,Object.assign({},a,{render:function(e){return E()?o.a.createElement(t,e):o.a.createElement(c.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}a(596);function ee(){return o.a.createElement("div",{className:"ui menu menu-container"},o.a.createElement("div",{className:"left"},o.a.createElement("div",{className:"header item"},"Panel administracyjny"),o.a.createElement("a",{className:"item",href:"/admin/list"},"Zbi\xf3rki"),o.a.createElement("a",{className:"item",href:"/admin/categories"},"Kategorie")),o.a.createElement("div",{className:"right"},o.a.createElement(P.a,{primary:!0,onClick:function(){return localStorage.removeItem(b),void(window.location.href="/login")}},"Wyloguj")))}a(597);var te=function(){return o.a.createElement(r.a,null,o.a.createElement(j.a,null),o.a.createElement(ee,null),o.a.createElement("div",null,o.a.createElement(c.b,{path:"/login",component:V}),o.a.createElement(c.b,{path:"/",exact:!0,component:V}),o.a.createElement(X,{path:"/admin",component:Y})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[330,1,2]]]);
//# sourceMappingURL=main.5532d7b8.chunk.js.map